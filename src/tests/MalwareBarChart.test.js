import React from 'react';
import ReactDOM from 'react-dom';
import App from '../App';
import MalwareBarChart from '../Components/MalwareBarChart';
import fetch from 'isomorphic-fetch';
import renderer from 'react-test-renderer';


describe('MalwareBarChart', () => {
    let state;
    let mountedChart;

    const malwareBarChart = () => {
        if(!mountedChart) {
                mountedChart = renderer.create(
                <MalwareBarChart/>
            )
        }

       return mountedChart;
    }


    it("always renders a container div", () => {
        const div = malwareBarChart().find("div")
        expect(div.length).toBeGreaterThan(0)
    })

    it("fetch /malware returns top data malware types", async () => {
        return fetch('http://localhost:3001/malware')
            .then( (res) => {
                expect(res).toBeDefined()
                res.json()
                .then( (res) => {
                    expect(res.length).toEqual(10)
                })
            })
    })


})